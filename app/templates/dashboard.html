{% extends 'index.html' %}
{% block content %}
<style>
.content {
    padding: 20px;
    transition: 0.3s;
    font-family: Arial, sans-serif;
}
.content.collapsed { }

/* CARDS */
.card-container { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px; }
.card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: flex; flex-direction: column; gap: 10px; border-top: 5px solid transparent; }
.card.total { border-top-color: #0d6efd; }
.card.closed { border-top-color: #ffc107; }
.card.completed { border-top-color: #198754; }
.card.in_process { border-top-color: #fd7e14; }
.card h3 { margin: 0; font-size: 16px; color: #333; }
.card h1 { margin: 0; font-size: 28px; color: #b71c1c; }

/* CONTROLS */
.controls-container { display: flex; gap: 10px; margin-bottom: 20px; }
.controls-container input { padding: 6px 10px; border-radius: 4px; border: 1px solid #ccc; }

/* DOCUMENT TABLE */
.recent-documents, .document-status-breakdown { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 30px; }
.breakdown-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 15px;
}
.document-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
.document-table th, .document-table td { text-align: left; padding: 10px; border-bottom: 1px solid #eee; font-size: 14px; }
.document-table th { font-weight: bold; color: #555; text-transform: uppercase; }

.status-badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; color: #333; background-color: #ffc10740; border: 1px solid #ffc107; }

.action-icons i { margin-right: 8px; cursor: pointer; color: #555; }
.action-icons i:hover { color: #000; }

h1.dashboard-title { margin-bottom: 5px !important; font-size: 32px; }
.greeting-text { margin-top: 0; margin-bottom: 20px; color: #777; }
.close-icon {
    font-size: 28px; /* size of the X */
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
}

</style>

<div class="content" id="content">
  <h1 class="dashboard-title">Dashboard</h1>
  <p class="greeting-text">Welcome to Admin Portal Dashboard</strong></p>


    <!-- Dashboard cards -->
    <div class="card-container">
        <div class="card total">
            <div class="card-title">Total Documents</div>
            <div class="card-number">{{ stats.total_documents }}</div>
        </div>
        <div class="card in_process">
            <div class="card-title">In Process</div>
            <div class="card-number">{{ stats.in_process }}</div>
        </div>
        <div class="card completed">
            <div class="card-title">Completed Documents</div>
            <div class="card-number">{{ stats.completed }}</div>
        </div>
        <div class="card closed">
            <div class="card-title">Closed Documents</div>
            <div class="card-number">{{ stats.closed }}</div>
        </div>

        
    </div>

    <!-- Recent Documents Table -->
    <div class="recent-documents">
        <h3 style="margin-bottom: 15px; font-size: 18px; color: #333;">Recent Documents</h3>
        <table class="document-table">
            <thead>
                <tr>
                    <th>DOC. Number</th>
                    <th>Title</th>
                    <th>Department</th>
                    <th>Date In</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% if records %}
                    {% for record in records %}
                        <tr>
                            <td>{{ record.document_id }}</td>
                            <td>{{ record.title }}</td>
                            <td>{{ record.department }}</td>
                            <td>{{ record.date_received.strftime('%Y-%m-%d') }}</td>
                            <td>
                                <span class="status-badge">
                                    {{ record.status }}
                                </span>
                            </td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="5">No recent documents found.</td>
                    </tr>
                {% endif %}
            </tbody>


        </table>
    </div>

    <!-- Document Status Breakdown -->
    <div class="document-status-breakdown">
        <h3>Document Status Breakdown</h3>
        <div class="breakdown-grid">
            {% for status_label, count in charts_combined %}
                <div class="status-item">
                    <div class="status-title">{{ status_label }}</div>
                    <div class="status-number">{{ count }}</div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
