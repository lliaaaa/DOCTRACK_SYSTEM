<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DTS - Admin</title>

    <!-- Icons & Bootstrap -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
:root{ --sidebar-width: 250px; --content-offset: 20px; --collapsed-offset: 10px; }
body { font-family: Arial, sans-serif; margin: 0; background:#f4f4f4; }

/* ===== SIDEBAR ===== */
.sidebar{
    width:var(--sidebar-width); background:#8f0707; height:100vh;
    position:fixed; left:0; top:0; padding-top:20px;
    transition:.3s; color:white; overflow-y:auto; z-index:1030;
}
.sidebar.collapsed{ width:70px; }

.sidebar-header{text-align:center;margin-bottom:20px;}
.menu-title{font-size:12px;padding:10px 20px;opacity:.7;}

.sidebar a{
    display:flex;align-items:center;gap:10px;
    padding:12px 20px;color:white;text-decoration:none; white-space:nowrap;
}
.sidebar a:hover{ background:#8e0000; }
.sidebar i{ min-width:20px;text-align:center; }

/* ===== HEADER ===== */
.header{
    height:60px;background:#b71c1c;color:white;
    display:flex;align-items:center;padding:0 20px;
    margin-left:250px;transition:.3s;
}
.header.collapsed{ margin-left:70px; }

.content{
    margin-left: 150px; padding:80px 20px 20px;
    transition:.3s;min-height:100vh;
}
.content.collapsed{ margin-left: calc(70px - var(--collapsed-offset)); padding-top:80px; }

.table-container{overflow-x:auto;}
table{
    width:100%;background:white;border-radius:8px;
    border-collapse:collapse;box-shadow:0 2px 6px rgba(0,0,0,.05);
}
th,td{padding:12px;font-size:14px;border-bottom:1px solid #eee;}
th{background:#f1f3f5;text-transform:uppercase;font-size:13px;}

.modal-content{border-radius:10px;}
</style>
</head>

<body>

<!-- ===== SIDEBAR ===== -->
<div class="sidebar" id="sidebar">

<div class="sidebar-header">
    <h4>DTS</h4>
    <small>
        {% if current_user.role == 'admin' %}
            Office Admin
        {% else %}
            Office User
        {% endif %}
    </small>
</div>

<a href="{{ url_for('main.dashboard') }}">
    <i class="fa fa-home"></i><span>Dashboard</span>
</a>

<p class="menu-title">DOCUMENT MANAGEMENT</p>

<a href="{{ url_for('main.add_document') }}">
    <i class="fa fa-plus"></i><span>New Document</span>
</a>

<a href="{{ url_for('main.incoming_documents') }}">
    <i class="fa fa-inbox"></i><span>Incoming</span>
</a>

<a href="{{ url_for('main.outgoing_documents') }}">
    <i class="fa fa-paper-plane"></i><span>Outgoing</span>
</a>

<a href="{{ url_for('main.processing_documents') }}">
    <i class="fa fa-spinner"></i><span>Processing</span>
</a>

<a href="{{ url_for('main.archived_documents') }}">
    <i class="fa fa-box-archive"></i><span>Archived / Closed</span>
</a>

<a href="{{ url_for('main.trace') }}">
    <i class="fa fa-location-dot"></i><span>Trace</span>
</a>

<p class="menu-title">ANALYTICS</p>

<a href="{{ url_for('main.analytics') }}">
    <i class="fa fa-chart-line"></i><span>Bottleneck Analytics</span>
</a>

<a href="{{ url_for('main.reports') }}">
    <i class="fa fa-file-alt"></i><span>Reports</span>
</a>

{% if current_user.role == 'admin' %}
<p class="menu-title">OFFICE</p>

<a href="{{ url_for('main.users') }}">
    <i class="fa fa-users"></i><span>Staff Members</span>
</a>

<a href="{{ url_for('main.office_settings') }}">
    <i class="fa fa-building"></i><span>Office Settings</span>
</a>

<a href="{{ url_for('main.activity_logs') }}">
    <i class="fa fa-clipboard-list"></i><span>Activity Logs</span>
</a>
{% endif %}

</div>

<!-- ===== HEADER ===== -->
<div class="header d-flex justify-content-between" id="header">
    <i class="fa fa-bars" onclick="toggleSidebar()" style="cursor:pointer"></i>

    <h5 class="mb-0">
        DTS â€“ {{ current_user.department }}
    </h5>

    <div class="dropdown">
        <a class="text-white dropdown-toggle"
           data-bs-toggle="dropdown">
            <i class="fa fa-user-circle"></i> {{ current_user.full_name }}
        </a>

        <ul class="dropdown-menu dropdown-menu-end">
            <li>
                <a class="dropdown-item"
                   data-bs-toggle="modal"
                   data-bs-target="#changePasswordModal">
                   Change Password
                </a>
            </li>
            <li><hr></li>
            <li>
                <a class="dropdown-item"
                   href="{{ url_for('auth.logout') }}">
                   Logout
                </a>
            </li>
        </ul>
    </div>
</div>

<!-- ===== CONTENT ===== -->
<div class="content" id="content">
{% block content %}{% endblock %}
</div>

<!-- ===== PASSWORD MODAL ===== -->
<div class="modal fade" id="changePasswordModal">
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content p-3">

<form method="POST" action="{{ url_for('auth.change_password') }}">
<h5>Change Password</h5>

<input class="form-control mb-2" name="current_password" placeholder="Current Password" required>
<input class="form-control mb-2" name="new_password" placeholder="New Password" required>
<input class="form-control mb-3" name="confirm_password" placeholder="Confirm Password" required>

<button class="btn btn-danger w-100">Update</button>
</form>

</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
function toggleSidebar(){
    document.getElementById("sidebar").classList.toggle("collapsed");
    document.getElementById("header").classList.toggle("collapsed");
    document.getElementById("content").classList.toggle("collapsed");
}
</script>

</body>
</html>