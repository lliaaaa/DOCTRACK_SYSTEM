{% extends 'admin/index.html' %}
{% block content %}
<!-- ✅ BOOTSTRAP 5 CSS + JS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<style>
.content {
    margin-left: 140px;
    padding: 20px;
    transition: 0.3s;
    background: #f4f4f4;
    font-family: Arial, sans-serif;
}
.content.collapsed { margin-left: 70px; }

/* CARDS */
.card-container { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px; }
.card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: flex; flex-direction: column; gap: 10px; border-top: 5px solid transparent; }
.card.total { border-top-color: #0d6efd; }
.card.pending { border-top-color: #ffc107; }
.card.completed { border-top-color: #198754; }
.card.inprogress { border-top-color: #fd7e14; }
.card h3 { margin: 0; font-size: 16px; color: #333; }
.card h1 { margin: 0; font-size: 28px; color: #b71c1c; }

/* CONTROLS */
.controls-container { display: flex; gap: 10px; margin-bottom: 20px; }
.controls-container input { padding: 6px 10px; border-radius: 4px; border: 1px solid #ccc; }

/* DOCUMENT TABLE */
.recent-documents, .document-status-breakdown { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 30px; }
.document-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
.document-table th, .document-table td { text-align: left; padding: 10px; border-bottom: 1px solid #eee; font-size: 14px; }
.document-table th { font-weight: bold; color: #555; text-transform: uppercase; }

.status-badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; color: #333; background-color: #ffc10740; border: 1px solid #ffc107; }

.action-icons i { margin-right: 8px; cursor: pointer; color: #555; }
.action-icons i:hover { color: #000; }

h1.dashboard-title { margin-bottom: 5px !important; font-size: 32px; }
.greeting-text { margin-top: 0; margin-bottom: 20px; color: #777; }
.close-icon {
    font-size: 28px; /* size of the X */
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
}

    /* Form styling */
    .form-label {
        font-weight: 600;
        color: #374151;
    }

    .form-control,
    .form-select {
        border-radius: 8px;
        border: 1px solid #d1d5db;
        height: 45px;
        padding: 8px 12px;
        transition: all 0.2s;
        width: 100%;
        box-sizing: border-box;
    }

    .form-control:focus,
    .form-select:focus {
        border-color: #4f46e5;
        box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2);
    }

    textarea.form-control {
        min-height: 80px;
        resize: vertical;
    }

    .btn-submit {
        background-color: #9c0b19;
        color: #fff;
        font-weight: 600;
        border-radius: 8px;
        padding: 12px 0;
        font-size: 16px;
        transition: background-color 0.2s;
        width: 100%;
        margin-top: 10px;
    }

    .btn-submit:hover {
        background-color: #4338ca;
    }

    .mb-3 {
        margin-bottom: 15px !important;
    }

    /* Two-column layout */
    .row-cols {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
    }

    .row-cols .col-half {
        flex: 1 1 calc(50% - 10px);
        min-width: 200px;
    }

</style>

<div class="content" id="content">
  <h1 class="dashboard-title">Add New Document</h1>
  <p class="greeting-text">Welcome to Admin Portal Dashboard</p>

  <!-- ✅ FORM START -->
  <form method="POST" action="{{ url_for('main.add_document') }}">
      
      <div class="mb-3">
          <label for="title" class="form-label">Title</label>
          <input type="text" class="form-control" id="title" name="title" required placeholder="Enter document title">
      </div>

      <div class="row-cols">
          <div class="col-half mb-3">
              <label for="doc_type" class="form-label">Document Type</label>
              <select class="form-select" id="doc_type" name="doc_type" required>
                  <option value="" selected disabled>Select Type</option>
                  {% for dt in document_type %}
                  <option value="{{ dt.name }}">{{ dt.name }}</option>
                  {% endfor %}
              </select>
          </div>

          <div class="col-half mb-3">
              <label for="implementing_office" class="form-label">Implementing Office</label>
              <select class="form-select" id="implementing_office" name="implementing_office" required>
                  <option value="" selected disabled>Select Office</option>
                  {% for dept in departments %}
                  <option value="{{ dept.name }}">{{ dept.name }}</option>
                  {% endfor %}
              </select>
          </div>
      </div>

      <div class="row-cols">
          <div class="col-half mb-3">
              <label for="date_received" class="form-label">Date Received</label>
              <input type="date" class="form-control" id="date_received" name="date_received" required>
          </div>

          <div class="col-half mb-3">
              <label for="amount" class="form-label">Amount (Optional)</label>
              <input type="number" class="form-control" id="amount" name="amount" placeholder="0.00">
          </div>
      </div>

      <div class="row-cols">
          <div class="col-half mb-3">
              <label for="released_by" class="form-label">Released By</label>
              <select class="form-select" id="released_by" name="released_by" required>
                  <option value="" selected disabled>Select Employee</option>
                  {% for user in users %}
                      <option value="{{ user.full_name }}">{{ user.full_name }}</option>
                  {% endfor %}
              </select>
          </div>

          <div class="col-half mb-3">
              <label for="received_by" class="form-label">Received By</label>
              <select class="form-select" id="received_by" name="received_by" required>
                  <option value="" selected disabled>Select Employee</option>
                  {% for user in users %}
                      <option value="{{ user.full_name }}">{{ user.full_name }}</option>
                  {% endfor %}
              </select>
          </div>
      </div>

      <div class="mb-3">
          <label for="status" class="form-label">Status</label>
          <select class="form-select" id="status" name="status" required>
              <option value="" selected disabled>Select Status</option>
              {% for stat in status %}
                  {% if stat.name != "Closed" %}
                      <option value="{{ stat.name }}">{{ stat.name }}</option>
                  {% endif %}
              {% endfor %}
          </select>
      </div>

      <button type="submit" class="btn-submit">Add Document</button>
  </form>
  <!-- ✅ FORM END -->
</div>

{% endblock %}
