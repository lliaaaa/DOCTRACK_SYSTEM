{% extends 'superadmin/index.html' %}
{% block content %}
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f4f4f4; }
.page-header { padding:18px 20px; background:white; border-bottom:1px solid #e6e6e6; }
.table-container { padding:20px; }
table { width:100%; border-collapse:collapse; background:white; border-radius:8px; overflow:hidden; box-shadow:0 1px 4px rgba(0,0,0,0.05); }
th, td { padding:12px 8px; text-align:left; border-bottom:1px solid #eee; }
th { background:#f7f7f7; }
button { padding:6px 12px; margin:2px; border:none; border-radius:4px; cursor:pointer; }
.edit-btn { background:#0d6efd; color:white; }
.delete-btn { background:#dc3545; color:white; }
</style>
</head>
<body>

<div class="page-header">
    <h2 style="margin:0;">Departments Management</h2>
    <div class="small">View and manage all departments</div>
</div>

<div class="table-container">
    <button onclick="addDepartment()">Add Department</button>
    <table id="deptTable">
        <thead>
            <tr>
                <th>Department ID</th>
                <th>Name</th>
                <th>Head</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <!-- Populated by JS -->
        </tbody>
    </table>
</div>

<script>
// Sample department data
let departments = [
    {id:"DEPT-001", name:"Finance", head:"Alice"},
    {id:"DEPT-002", name:"HR", head:"Bob"},
    {id:"DEPT-003", name:"IT", head:"Charlie"}
];

function renderTable() {
    const tbody = document.getElementById("deptTable").querySelector("tbody");
    tbody.innerHTML = "";
    departments.forEach(dept => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${dept.id}</td>
                        <td>${dept.name}</td>
                        <td>${dept.head}</td>
                        <td>
                            <button class="edit-btn" onclick="editDepartment('${dept.id}')">Edit</button>
                            <button class="delete-btn" onclick="deleteDepartment('${dept.id}')">Delete</button>
                        </td>`;
        tbody.appendChild(tr);
    });
}

function addDepartment() {
    const name = prompt("Enter Department Name:");
    const head = prompt("Enter Department Head:");
    if(name && head){
        const id = "DEPT-" + String(departments.length + 1).padStart(3,'0');
        departments.push({id,name,head});
        renderTable();
    }
}

function editDepartment(id) {
    const dept = departments.find(d => d.id === id);
    const name = prompt("Edit Department Name:", dept.name);
    const head = prompt("Edit Department Head:", dept.head);
    if(name && head){
        dept.name = name;
        dept.head = head;
        renderTable();
    }
}

function deleteDepartment(id){
    if(confirm("Are you sure you want to delete this department?")){
        departments = departments.filter(d => d.id !== id);
        renderTable();
    }
}

// Initial render
renderTable();
</script>
{% endblock %}